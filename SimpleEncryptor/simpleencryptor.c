#include <stdio.h>
#include <stdlib.h>

int main(int argc, char* argv[]){
    FILE *fp1, *fp2;
    unsigned char *buffer;
    long length;

    char fname[100]; // Define fname as an array of characters

    printf("type your file to be encrypted: ");
    scanf("%s", fname);

    fp1 = fopen(fname, "rb");

    if(fp1 == NULL){
        printf("Target file does not exist!"); 
        exit(1);
    }

    fseek(fp1, 0, SEEK_END);
    length = ftell(fp1);
    fseek(fp1, 0, SEEK_SET);

    buffer = (unsigned char*)malloc(length * sizeof(unsigned char));
    if(buffer == NULL){
        printf("memory allocation failed!");
        exit(2);
    }

    fread(buffer, sizeof(unsigned char), length, fp1);
    fclose(fp1);

    fp2 = fopen(fname, "wb"); 

    if(fp2 == NULL){
        printf("Error opening file for writing!");
        free(buffer);
        exit(3);
    }

    for(long i = 0; i < length; i++) {
        buffer[i] = buffer[i] + 100;
    }
    
    fwrite(buffer, sizeof(unsigned char), length, fp2);
    fclose(fp2);
    free(buffer);
    return 0;
}
